<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Respostas do Gartic üè† ‚öæ üçì üêº üó®Ô∏è üé© üß≥</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Google Sans', sans-serif;
            background-color: #2e003e;
            color: #ffffff;
            margin: 20px;
        }

        h1 {
            color: #ff007f;
            cursor: pointer;
            text-align: center;
        }

        h2 {
            color: #ff6f91;
        }

        .search-container, input[type="number"], input[type="text"], button {
            display: block;
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .custom-select {
            position: relative;
            display: block;
            width: 100%;
            margin-bottom: 10px;
        }

        .select-selected {
            background-color: #4b005a;
            color: #ffffff;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .select-items div {
            padding: 10px;
            background-color: #4b005a;
            color: #ffffff;
            cursor: pointer;
            border-bottom: 1px solid #ffffff;
        }

        .select-items div:hover, .same-as-selected {
            background-color: #ff6f91;
        }

        input[type="number"], input[type="text"] {
            background-color: #4b005a;
            color: #ffffff;
        }

        button {
            background-color: #ff6f91;
            color: #ffffff;
            cursor: pointer;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #ffffff;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #ff007f;
        }

        .hidden {
            display: none;
        }

        img.emoji {
            width: 24px;
            height: 24px;
            vertical-align: middle;
            margin-right: 5px;
        }

        /* Responsividade */
        @media screen and (max-width: 768px) {
            body {
                margin: 10px;
            }
            h1 {
                font-size: 1.5em;
            }
        }

        /* Avisos abaixo dos inputs */
        .warning {
            color: red;
            font-size: 0.9em;
        }

        .example {
            color: red;
            font-size: 0.9em;
        }

        .result-count {
            font-size: 1.2em;
            margin-top: 20px;
            color: #ff6f91;
        }

        /* Estilo para a lista de palavras do tema */
        .tema-lista {
            margin-top: 20px;
            background-color: #3c0048;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1 onclick="window.location.reload()">Lista de Respostas do Gartic</h1>

    <div class="custom-select">
        <div class="select-selected">Escolha um tema:</div>
        <div class="select-items hidden">
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/geral.json" data-img="https://gartic.com.br/imgs/novo/icon_vet_geral.png" data-title="Geral">
                <img src="https://gartic.com.br/imgs/novo/icon_vet_geral.png" class="emoji" alt="Geral"> Geral
            </div>
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/objetos.json" data-img="https://gartic.com.br/imgs/novo/icon_vet_objetos.png" data-title="Objetos">
                <img src="https://gartic.com.br/imgs/novo/icon_vet_objetos.png" class="emoji" alt="Objetos"> Objetos
            </div>
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/alimentos.json" data-img="https://gartic.com.br/imgs/novo/icon_vet_alimentos.png" data-title="Alimentos">
                <img src="https://gartic.com.br/imgs/novo/icon_vet_alimentos.png" class="emoji" alt="Alimentos"> Alimentos
            </div>
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/animais.json" data-img="https://gartic.com.br/imgs/novo/icon_vet_animais.png" data-title="Animais">
                <img src="https://gartic.com.br/imgs/novo/icon_vet_animais.png" class="emoji" alt="Animais"> Animais
            </div>
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/verbos.json" data-img="https://gartic.com.br/imgs/novo/icon_vet_verbos.png" data-title="Verbos">
                <img src="https://gartic.com.br/imgs/novo/icon_vet_verbos.png" class="emoji" alt="Verbos"> Verbos
            </div>
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/desenhos.json" data-img="https://gartic.com.br/imgs/novo/icon_vet_desenho.png" data-title="Desenhos Animados">
                <img src="https://gartic.com.br/imgs/novo/icon_vet_desenho.png" class="emoji" alt="Desenhos Animados"> Desenhos Animados
            </div>
            <div data-value="https://raw.githubusercontent.com/kelbovine/replygtc/main/profissoes.json" data-title="Profiss√µes">
                üß≥ Profiss√µes
            </div>
        </div>
    </div>

    <div class="search-container hidden" id="searchContainer">
        <input type="number" id="lengthInput" placeholder="Quantidade de letras" min="1">
        <div class="example">Exemplo: 10</div>

        <input type="text" id="hintInput" placeholder="Dica inicial">
        <div class="example">Exemplo: Letra P</div>

        <input type="text" id="lettersInput" placeholder="Letras da palavra (separadas por espa√ßo)">
        <div class="warning">Separe as letras com espa√ßos.</div>

        <button onclick="search()">Buscar</button>
    </div>

    <div id="result"></div>
    <h2 id="temaHeader" class="hidden"></h2>

    <!-- Lista de todas as palavras do tema -->
    <div id="listaTemas" class="tema-lista hidden"></div>

    <script>
        let dadosTemas = {};

        // C√≥digo para select personalizado
        const customSelect = document.querySelector('.custom-select');
        const selected = customSelect.querySelector('.select-selected');
        const itemsContainer = customSelect.querySelector('.select-items');

        selected.addEventListener('click', function() {
            itemsContainer.classList.toggle('hidden');
        });

        itemsContainer.querySelectorAll('div').forEach(item => {
            item.addEventListener('click', function() {
                selected.innerHTML = this.innerHTML;
                selected.setAttribute('data-value', this.getAttribute('data-value'));
                carregarDados(this.getAttribute('data-value'), this.getAttribute('data-title'), this.getAttribute('data-img'));
                itemsContainer.classList.add('hidden');
            });
        });

        function carregarDados(temaUrl, title, imgSrc) {
            if (temaUrl) {
                // Atualiza o cabe√ßalho com o tema e a imagem correta e exibe os campos de busca
                document.getElementById('temaHeader').innerHTML = `<img src="${imgSrc}" alt="${title}" class="emoji"> Lista de ${title}`;
                document.getElementById('temaHeader').classList.remove('hidden');
                document.getElementById('searchContainer').classList.remove('hidden');

                fetch(temaUrl)
                    .then(response => response.json())
                    .then(data => {
                        dadosTemas = data;
                        displayTemas();
                    })
                    .catch(error => console.error('Erro ao carregar os dados:', error));
            }
        }

        function displayTemas() {
            const listElement = document.getElementById('listaTemas');
            const wordCounts = Object.entries(dadosTemas).map(([length, words]) => {
                return `<h3>${length} Letras</h3><ul>${words.map(word => `<li>${word}</li>`).join('')}</ul>`;
            }).join('');
            listElement.innerHTML = wordCounts;
            listElement.classList.remove('hidden');
        }

        function search() {
            const length = document.getElementById('lengthInput').value;
            const hint = document.getElementById('hintInput').value.toUpperCase();
            const letters = document.getElementById('lettersInput').value.toUpperCase().split(/\s+/);

            const filteredWords = Object.values(dadosTemas).flat().filter(word => {
                const matchesLength = !length || word.length == length;
                const matchesHint = !hint || word.startsWith(hint);
                const matchesLetters = letters.every(letter => word.includes(letter));

                return matchesLength && matchesHint && matchesLetters;
            });

            displayResults(filteredWords);
        }

        function displayResults(words) {
            const resultElement = document.getElementById('result');
            const listElement = document.getElementById('listaTemas');
            const resultCount = words.length;

            // Oculta a lista de palavras do tema enquanto os resultados est√£o ativos
            listElement.classList.add('hidden');

            const resultCountElement = document.createElement('div');
            resultCountElement.className = 'result-count';
            resultCountElement.innerText = `${resultCount} resultado(s) encontrado(s)`;
            resultElement.innerHTML = ''; // Limpa resultados anteriores
            resultElement.appendChild(resultCountElement);

            if (words.length > 0) {
                const tableContent = words.map(word => `<tr><td>${word}</td><td>${word.length} letras</td></tr>`).join('');
                resultElement.innerHTML += `<table><thead><tr><th>Palavra</th><th>Quantidade de Letras</th></tr></thead><tbody>${tableContent}</tbody></table>`;
            } else {
                resultElement.innerHTML = '<p>Nenhum resultado encontrado.</p>';
            }
        }
    </script>
</body>
</html>
